# Spotify Stream Analysis

## Table of contents
- [Project Overview](#project-overview)
- [Executive Summary](#executive-summary)
- [Goal](goal)
- [Data Structure](data-structure)
- [Tools](tools)
- [Data Analysis](#data-analysis)
- [Insights](insights)
- [Recommendations](recommendations)

### Project Overview
- This project focuses on analyzing a personal Spotify listening history dataset to uncover individual music consumption patterns, preferences, and trends over time. Understanding these habits can provide insights into musical taste evolution, preferred listening times, and the influence of factors like shuffle or platform on listening behavior. This analysis can be valuable for personal reflection, or even for developers looking to understand user behavior on streaming platforms.
  
### Executive Summary
**Sales Department:**
This analysis equips the sales team with crucial information on peak sales hours, enabling them to optimize staffing and sales efforts. It also highlights the highest and lowest revenue generated by products across different locations, weeks, months, and seasons, allowing for targeted sales strategies and performance improvements.

**Product Management Department:**
For product management, the analysis offers insights into the average price elasticity of demand for various products, helping them understand how price changes affect sales. It also sheds light on the performance of premium versus budget-friendly products and identifies customer preferences, which can guide product development and portfolio decisions.

**Branch Managers:**
Branch managers can leverage this analysis to understand which products sell most frequently at their specific locations. This information is vital for optimizing inventory management, ensuring popular items are adequately stocked, and potentially identifying local preferences.

**Marketing Team:** 
The marketing team can utilize the findings to strategically plan special promotions based on peak sales periods and customer behavior. It informs decisions on introducing different flavors at various store locations to cater to diverse customer preferences, developing effective combo offers for weekdays or weekends, and tailoring discount strategies to increase customer visits and boost revenue.

### ðŸŽ¯Goal
The objective of this analysis is to:

1. **User Engagement & Listening Behavior.**
  -	What factors influence song skipping behavior?
  - How does shuffle mode impact the way users listen to songs?
  - Which platform (mobile, desktop, web) has the highest user engagement?
  -	What percentage of streams are played in full vs. skipped?
  - How does listening behavior differ by time of day or day of the week?


2. **Content Performance & Trends.**
  - What are the most played and most skipped songs?
  - Which artists and albums have the highest total playtime?
  - Are there specific genres or artists that users skip more frequently?
  - How does a songâ€™s popularity or release year affect skipping rates?
  - Is there a correlation between song duration and completion rates?

3. **Platform & Feature Analysis.**
  -	 Do users listen to music differently on mobile vs. desktop vs. web?
  -	 How does autoplay (songs started without user action) compare to manually selected songs in terms of engagement?
  -	 What is the average play duration per session for different platforms?
  -	 What percentage of users replay the same song multiple times?

4. **Actionable Insights for Spotify.**
 - How can Spotify optimize its recommendation algorithms to improve engagement?
 - Should Spotify promote specific artists, genres, or playlists to reduce skip rates?
 - Can Spotify adjust shuffle mode or autoplay settings to enhance user satisfaction?
 - How do advertisements (if applicable) impact streaming behavior?
 - What strategies can Spotify use to improve retention and engagement among users?

### Data structure and initial checks
[Dataset](https://docs.google.com/spreadsheets/d/16aVwbhkatereQK9XxhCJlANGXxiw_2hGnl3UvNGzV9g/edit?gid=2112276726#gid=2112276726)

 - The initial checks of your transactions.csv dataset reveal the following:

| Features | Description | Data types |
| -------- | -------- | -------- | 
| spotify_track_uri | Spotify URI that uniquely identifies each track in the form of "spotify:track:<base-62 string>"  | Object |  
| Timestamp | Timestamp indicating when the track stopped playing in UTC (Coordinated Universal Time) | Object | 
| platform | Platform used when streaming the track | Object |
| ms_played | Number of milliseconds the stream was played | int |
| track_name | Name of the track |
| artist_name | Name of the artist |
| album_name | Name of the album |
| reason_start | Why the track started |
| reason_end | Why the track ended |
| shuffle | TRUE or FALSE depending on if shuffle mode was used when playing the track |
| skipped | TRUE of FALSE depending on if the user skipped to the next song | 

### Tools
- Excel : Google Sheets - Check for data types, Table formatting
- SQL : Big QueryStudio - Querying, manipulating, and managing data in relational databases in 
- Python: Google Colab - Data Preparation and pre-processing, Exploratory Data Analysis, Descriptive Statistics, inferential Statistics, Data manipulation and Analysis(Numpy, Pandas),Visualization (Matplotlib, Seaborn), Feature Engineering, Hypothesis Testing.

### Data Analysis
1). Python
- Importing Libraries
``` python
  import numpy as np
  import pandas as pd
  import matplotlib.pyplot as plt
  import seaborn as sns
  import warnings
  warnings.filterwarnings('ignore')
```
- Loading the dataset
``` python  
  df = pd.read_csv('Spotify_history.csv', encoding='latin-1')
  df
```
``` python
  df.shape
```
![image](https://github.com/user-attachments/assets/b5e0e817-c2f4-415c-9118-1d18be68ea93)
``` python
  df.ndim
```
![image](https://github.com/user-attachments/assets/a0376c9d-c626-45b5-b5f8-7ec4b8c7374e)
``` python
  df.info()
```
![image](https://github.com/user-attachments/assets/dc511876-98ab-4912-a8de-a22780f273b8)
- Checking for Null/Nan values in all the rows and columns and removing them accordingly
``` python
  df.isna().sum()/len(df)
```
![image](https://github.com/user-attachments/assets/42cd19a7-6e2b-42ea-adb4-a5771df1c429)
``` python
df.drop_duplicates(inplace=True)

df['reason_start'].isna().sum()
df.dropna(subset=['reason_start'], inplace=True)

df['reason_end'].isna().sum()
df.dropna(subset=['reason_end'], inplace=True)

df['Timestamp'] = pd.to_datetime(df['Timestamp'])
df['date'] = df['Timestamp'].dt.date
df['time'] = df['Timestamp'].dt.time
```
- Descriptive Statistics
``` python
df.describe()
```
![image](https://github.com/user-attachments/assets/5157b88e-3150-42a5-82ec-681776e52cd4)
``` python
  df.rename(columns={'spotify_track_uri':'URL'}, inplace=True)
  df.columns
```
![image](https://github.com/user-attachments/assets/ffb69c9d-0f1a-427b-9b7f-88f495c186bc)
``` python
  df.drop('URL', axis=1, inplace=True)
  new_column_order = ['Timestamp', 'date', 'time','artist_name','track_name','album_name', 'ms_played','platform','shuffle','skipped','reason_start','reason_end']
  df = df[new_column_order]
  df
```
![image](https://github.com/user-attachments/assets/2236902f-fbc1-46ef-b480-8d824090b352)

A.  User Engagement & Listening Behavior
``` python
   # 1 The relationship between 'ms_played' and 'skipped'
   plt.figure(figsize=(15, 10))

   plt.subplot(2,3,1)
   sns.boxplot(x='skipped', y='ms_played', data=df)
   plt.title('Song Duration vs. Skipping Behavior')

   # 2.Investigation on the impact of 'shuffle' mode
   plt.subplot(2,3,3)
   sns.countplot(x='skipped', hue='shuffle', data=df)
   plt.title('Skipping Behavior in Shuffle Mode')

   # 3.To Analyze skipping reasons ('reason_start' and 'reason_end')
   plt.subplot(2,3,4)
   sns.countplot(x='reason_start', hue='skipped', data=df)
   plt.title('Skipping Behavior Based on Reason for Starting the Song')
   plt.xticks(rotation=45, ha='right')
   plt.subplot(2,3,6)

   sns.countplot(x='reason_end', hue='skipped', data=df)
   plt.title('Skipping Behavior Based on Reason for Ending the Song')
   plt.xticks(rotation=45, ha='right')

   #4 To analyze the skipped reasons hourly
   plt.subplot(2,3,5)
   df['hour'] = df['Timestamp'].dt.hour
   sns.countplot(x='hour', hue='skipped', data=df)
   plt.title('Skipping Behavior Over Time of Day')
   plt.xlabel('Hour of Day')
   plt.ylabel('Count')

  plt.tight_layout()
  plt.show()
```

``` python
  sns.countplot(x='skipped', hue='shuffle', data=df)
```

``` python
  # 1. Quantifying the Difference (Skip Rate)
  skip_rate_shuffle = df[df['shuffle'] == True]['skipped'].mean()
  skip_rate_no_shuffle = df[df['shuffle'] == False]['skipped'].mean()

  print(f"Skip rate with shuffle: {skip_rate_shuffle:.2%}")
  print(f"Skip rate without shuffle: {skip_rate_no_shuffle:.2%}")

  # 2. Time of Day Analysis
  hourly_skip_rates = df.groupby(['hour', 'shuffle'])['skipped'].mean().unstack()

  # Plotting hourly skip rates for both shuffle and no shuffle.
  plt.figure(figsize=(12, 6))
  plt.plot(hourly_skip_rates.index, hourly_skip_rates[True], label='Shuffle On')
  plt.plot(hourly_skip_rates.index, hourly_skip_rates[False], label='Shuffle Off')

  plt.xlabel("Hour of Day")
  plt.ylabel("Skip Rate")
  plt.title("Hourly Skip Rates (Shuffle vs. No Shuffle)")
  plt.legend()
  plt.grid(True)
  plt.show()

  # 3. Platform Differences (if platform data is available)
  if 'platform' in df.columns:
     platform_skip_rates = df.groupby(['platform', 'shuffle'])['skipped'].mean().unstack()
     print("\nSkip rates by platform:")
     print(platform_skip_rates)

  #4. Analyze skip rates based on start and end reasons for both shuffle and no shuffle
  start_reason_impact = pd.pivot_table(df, values='skipped', index='reason_start', columns='shuffle', aggfunc='mean')
  end_reason_impact = pd.pivot_table(df, values='skipped', index='reason_end', columns='shuffle', aggfunc='mean')

  print("\nSkip rates by reason for starting a song:")
  print(start_reason_impact)
  print("\nSkip rates by reason for ending a song:")
  end_reason_impact
```



### Insights
- Skipping behaviour based on reason for starting the song was more on trackdone, fwdbtn.
- Skipping behaviour over time took place more in the starting hour of the day & ending hour of the day
- Hourly skip rates with shuffle ON was highest at 6th hour of the day when shuffle was On & shuffle OFF where highest was at 8th hour when shuffles was OFF
- Skip rates took place more on Windows.
- The skip rates by reason for starting and ending a a song is users who use fwdbtn and trackdone.
- Users were listening to the songs more on Friday.

- The most songs played were
1. Ode To The
2. Mets                                                                        
3. The Return of the King (feat. Sir James Galway, Viggo Mortensen and Renee
Fleming)
4. The Fellowship Reunited (feat. Sir James Galway, Viggo Mortensen and RenÃ©e Fleming)    
5. 19 Dias y 500 Noches - En
6. Directo In the Blood                                                                           

- The most skipped songs were:
1. ParaÃ­so                                              
2. Photograph                                      
3. Superheroes                                     
4. Switzerland                                       
5. What Do You Mean?

- The artists which have the highest total playtime is
1. The Beatles           
2. The Killers           
3. John Mayer             
4. Bob Dylan              
5. Paul McCartney         
6. Howard Shore           
7. The Strokes            
8. The Rolling Stones     
9. Pink Floyd             
10. Led Zeppelin      

- The albums with the highest total playtime
1. The Beatles                                           
2. The New Abnormal                                      
3. Imploding The Mirage                                  
4. Abbey Road                                            
5. Past Masters                                          
6. Blood On The Tracks                                   
7. Hot Fuss                                              
8. The Wall                                              
9. Pressure Machine                                      
10. Where the Light Is: John Mayer Live In Los Angeles
    
- Average skip rates by release year highest was on 2004, 2008, 2012.
- Total listening time by users on plstforms were more on Android, cast to device and IOS.

### Recommendations
A). Spotify optimization to recommend algorithms to improve engagement
1.  Analyze user listening patterns: Identify micro-genres or niche artists that users frequently engage with, even if they aren't mainstream. Use this information to refine recommendations within these specific tastes.

2.  Consider context:  Enhance recommendations based on time of day, day of the week, and platform.For instance, suggest more energetic music during the morning commute (mobile) or mellower tunes for evening relaxation (desktop).

3.  Personalization: Develop more granular user profiles, incorporating not only genre preferences but also factors like tempo, mood, and instrumentation preferences. Allow users to provide explicit feedback on recommendations (thumbs up/down), and incorporate this into the algorithm's weighting.

4.  Explore Hybrid Approaches: Combine collaborative filtering (based on similar user listening behavior) with content-based filtering (based on song attributes) for more diverse and relevant suggestions.

5.  A/B testing: Conduct rigorous A/B testing of different recommendation algorithms and parameters to validate their effectiveness in improving metrics like engagement, playtime, and retention.

6.  Diversity and serendipity: Introduce mechanisms to recommend songs outside a user's usual listening habits,but within their broader musical taste, to spark discovery and reduce "filter bubbles".  
Consider including 'discovery' playlists or options to explore related artists.
Reduce skip rates:  Analyze why certain songs are skipped frequently. If there's a clear pattern (e.g., songs of a specific genre or tempo are often skipped),adjust recommendations accordingly.  Prioritize songs with higher completion rates or user engagement.

7.  Evaluate the impact of shuffle mode:  Analyze how shuffle mode affects user behavior, especially skip rates and song discovery.
Refine recommendations within shuffle mode to maximize engagement and discovery.

8.  Leverage audio features: Spotify has access to extensive audio features (tempo, key, energy, valence, etc.) for each song.
Use these features to create recommendations based on a user's preferred audio profile.

9.  Improve cold-start problem: New users or new songs have little or no historical data.  Address the cold start problem by
providing onboarding that quickly gets a sense of the user's preferences and suggesting popular or diverse options initially.

B). Based on the analysis, promoting specific artists, genres, or playlists could be beneficial.
1.  Reduce Skip Rates:
- If certain genres or artists consistently have high skip rates, promoting alternatives within similar musical "neighborhoods" might help.  Instead of promoting the genre itself, focus on artists or subgenres within that genre that show higher completion rates.

2.  User Preferences:
- Promotion should be highly personalized. Don't promote something to everyone. If a user consistently skips a particular genre, avoid promoting more of it.  Focus on recommendations based on individual listening histories.

3.  A/B Testing:
-  The most reliable method is to A/B test different promotional strategies.  Create test groups where some users see promotions and others don't, and compare skip rates, engagement, and playtime.  This data will show whether promotions have a positive or negative impact.

4.  Contextual Promotions:
- Promotions should consider the time of day and platform.  A user might be receptive to certain genres or artists at certain times.  Promote accordingly.

5.  New User Onboarding:
-  For new users, promotions could help them quickly discover genres and artists that resonate with them. This will result in reduced skip rates and increased engagement from the start.

6.  Consider Other Factors:
-  Promotion effectiveness will likely depend on the nature of the promotion (banner ads, curated playlists, etc.).  The promotional method will affect user perception.
-  Some users may be irritated by intrusive promotions, reducing their overall satisfaction with the platform.

Analyze shuffle mode impact
- A/B test different shuffle and autoplay algorithms to determine which settings improve user satisfaction (measured by engagement metrics such as completion rates, playtime, and retention).

- Provide users with more control over shuffle and autoplay settings. Granular control (e.g., disabling autoplay for specific genres or artists) can lead to a more positive listening experience.

- Enhance recommendation algorithms for both shuffle and autoplay modes based on user listening history, preferences, and context.

Additional Strategies to Improve Retention and Engagement:
1. Enhanced Recommendations:
- Personalization: Further refine recommendations based on detailed user profiles (including tempo, mood, instrumentation preferences, and listening context).
- Diversity and Discovery: Introduce features that promote serendipitous discovery while staying within the user's broader taste.  This could involve "discovery" playlists or options to explore related artists.
- Contextual Awareness:  Recommendations should consider time of day, day of the week, and platform (mobile, desktop, web).
- A/B Testing: Continuously test various algorithms and parameters to measure improvements in engagement and retention.
- Cold-Start Solutions:  Improve initial recommendations for new users to quickly grasp their preferences and encourage continued usage.

2. Improved User Interface/User Experience (UI/UX):
- Navigation: Optimize the app's navigation to make it easier for users to find and explore content.
- Search Functionality: Enhance search to deliver more relevant results.
- Customization: Allow greater personalization of the app's interface and features.

3. Social Features:
- Collaborative Playlists: Encourage collaborative playlist creation and sharing.
- Social Listening:  Integrate features that allow users to listen to music together or share their listening experiences with friends.

4. Content Diversification:
- Podcasts and Audiobooks: Expand offerings beyond music with podcasts and audiobooks.
- Live Events:  Integrate live music events and streaming options.
- Exclusive Content: Offer exclusive content or early access to new releases to premium subscribers.

5. Gamification:
- Challenges and Rewards: Introduce listening challenges or reward systems to encourage engagement.
- Achievements:  Implement a system that gives users badges or achievements for listening milestones.

6. Community Building:
- Fan Communities: Create spaces for users to connect with each other and discuss music.
- Artist Interactions: Facilitate interactions between artists and fans.

7. Address Skip Rates:
- Analyze Skipped Songs: Investigate the reasons behind frequently skipped songs (genre, tempo, artist popularity) to adjust recommendations.
- Contextual Skip Reduction: Modify autoplay or shuffle settings based on the context (time, platform, recent listening).

8.  Targeted Promotions (if applicable):
- A/B Testing:  Test different promotional strategies to find the most effective approaches without negatively impacting user experience.
- Personalization: Focus on highly personalized promotions that are relevant to individual users' interests.

9. User Feedback Mechanisms:
- Surveys and Feedback Forms: Regularly collect feedback to understand user needs and preferences.
- In-App Feedback Options: Allow users to quickly provide feedback on individual songs, playlists, or recommendations.

10. Customer Support:
- Responsive Support: Ensure prompt and helpful customer support to resolve user issues.
